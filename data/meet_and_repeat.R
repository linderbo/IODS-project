setwd("C:/Users/Klas/Documents/GitHub/IODS-project")

#1

BPRS <- read.table("https://raw.githubusercontent.com/KimmoVehkalahti/MABS/master/Examples/data/BPRS.txt", sep  =" ", header = T)
RATS <- read.table("https://raw.githubusercontent.com/KimmoVehkalahti/MABS/master/Examples/data/rats.txt", sep  ="\t", header = T)

str(BPRS)
summary(BPRS)
#data is wide, weeks 0 through 8 represent bprs scores of 20 subjects in 2 groups. We´ll elongate this with gather.
#'data.frame':	40 obs. of  11 variables:
#  $ treatment: int  1 1 1 1 1 1 1 1 1 1 ...
#$ subject  : int  1 2 3 4 5 6 7 8 9 10 ...
#$ week0    : int  42 58 54 55 72 48 71 30 41 57 ...
#$ week1    : int  36 68 55 77 75 43 61 36 43 51 ...
#$ week2    : int  36 61 41 49 72 41 47 38 39 51 ...
#$ week3    : int  43 55 38 54 65 38 30 38 35 55 ...
#$ week4    : int  41 43 43 56 50 36 27 31 28 53 ...
#$ week5    : int  40 34 28 50 39 29 40 26 22 43 ...
#$ week6    : int  38 28 29 47 32 33 30 26 20 43 ...
#$ week7    : int  47 28 25 42 38 27 31 25 23 39 ...
#$ week8    : int  51 28 24 46 32 25 31 24 21 32 ...

str(RATS)
summary(RATS)
#data is wide, we have 16 rats in 3 groups with weight data from 8 weeks 
#'data.frame':	16 obs. of  13 variables:
#$ ID   : int  1 2 3 4 5 6 7 8 9 10 ...
#$ Group: int  1 1 1 1 1 1 1 1 2 2 ...
#$ WD1  : int  240 225 245 260 255 260 275 245 410 405 ...
#$ WD8  : int  250 230 250 255 260 265 275 255 415 420 ...
#$ WD15 : int  255 230 250 255 255 270 260 260 425 430 ...
#$ WD22 : int  260 232 255 265 270 275 270 268 428 440 ...
#$ WD29 : int  262 240 262 265 270 275 273 270 438 448 ...
#$ WD36 : int  258 240 265 268 273 277 274 265 443 460 ...
#$ WD43 : int  266 243 267 270 274 278 276 265 442 458 ...
#$ WD44 : int  266 244 267 272 273 278 271 267 446 464 ...
#$ WD50 : int  265 238 264 274 276 284 282 273 456 475 ...
#$ WD57 : int  272 247 268 273 278 279 281 274 468 484 ...
#$ WD64 : int  278 245 269 275 280 281 284 278 478 496 ...

# 2

#factorize categorical variables
BPRS$subject <- factor(BPRS$subject)
BPRS$treatment <- factor(BPRS$treatment)

RATS$ID <- factor(RATS$ID)
RATS$Group <- factor(RATS$Group)

#Make long, and add numeric time/week variables
BPRSL <-  BPRS %>% 
  gather(key = weeks, value = bprs, -treatment, -subject) %>%
  mutate(week = as.integer(substr(weeks, 5,9)))

RATSL <- RATS %>%
  gather(key = WD, value = Weight, -ID, -Group) %>%
  mutate(Time = as.integer(substr(WD, 3, 5))) 

glimpse(RATSL)
glimpse(RATS)


# in wide format we have several variables for weight at different time points. in long format we have only 1 variable for weight, and each observation also has a linked time variable instead.

glimpse(BPRS)
glimpse(BPRSL)

#Does four glimpses count as a "serious look"? :)

write.table(BPRSL, file = "data/BPRSL.txt")
write.table(RATSL, file = "data/RATSL.txt")